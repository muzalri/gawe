<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Between Island and Snow</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ’—</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Poppins:wght@300;400;500;600&family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/globe.gl"></script>
    <style>
        :root {
            --blue: #3182BD;
            --blue-light: #5da4d9;
            --blue-dark: #1e5a8a;
            --pink: #E18E96;
            --pink-light: #f0b8bd;
            --pink-dark: #c46a73;
            --snow: #f0f4f8;
            --island: #fff5f5;
            --gold: #ffd700;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Poppins', sans-serif;
            overflow-x: hidden;
            background: var(--snow);
        }

        /* ====================================================
           LOCK SCREEN
        ==================================================== */
        #lock-screen {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--pink-light) 0%, var(--snow) 50%, var(--blue-light) 100%);
            transition: all 1.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
        }

        #lock-screen.unlocked {
            opacity: 0;
            transform: scale(1.15);
            pointer-events: none;
            filter: blur(5px);
        }

        #lock-screen.hidden { display: none; }

        .lock-title {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            color: var(--blue-dark);
            margin-bottom: 0.5rem;
            opacity: 0;
            animation: fadeInDown 1s ease forwards 0.3s;
            text-align: center;
            padding: 0 1rem;
        }

        .lock-subtitle {
            font-family: 'Dancing Script', cursive;
            font-size: 1.2rem;
            color: var(--pink-dark);
            margin-bottom: 2.5rem;
            opacity: 0;
            animation: fadeInDown 1s ease forwards 0.6s;
        }

        /* ====== SVG PADLOCK (Premium) ====== */
        .padlock-wrapper {
            position: relative;
            width: 150px;
            height: 200px;
            margin-bottom: 2.5rem;
            opacity: 0;
            animation: fadeInUp 1s ease forwards 0.5s, padlockFloat 3s ease-in-out infinite 1.5s;
            transition: transform 0.6s ease, filter 0.4s ease;
        }

        .padlock-wrapper.anim-ready {
            opacity: 1;
            animation: none;
        }

        .padlock-glow {
            display: none;
        }

        .padlock-svg {
            width: 150px;
            height: 200px;
            filter: drop-shadow(0 10px 30px rgba(49, 130, 189, 0.3));
            position: relative;
            z-index: 2;
        }

        .padlock-svg .shackle-path {
            transition: transform 0.9s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* Step 1: Shackle springs UPWARD like a real padlock opening */
        .padlock-wrapper.unlocking .shackle-path {
            animation: shackleSpringUp 0.9s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        /* Step 2: Fully open */
        .padlock-wrapper.unlocked-full {
            transform: scale(1.1);
            filter: brightness(1.3);
        }

        .padlock-wrapper.unlocked-full .shackle-path {
            transform: translateY(-32px);
            opacity: 0.7;
        }

        .padlock-wrapper.fly-away {
            transform: scale(0) rotate(20deg);
            opacity: 0;
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .keyhole-glow {
            display: none;
        }

        /* Heart burst from keyhole */
        .heart-burst {
            position: absolute;
            top: 55%; left: 50%;
            transform: translate(-50%, -50%);
            z-index: 4;
            pointer-events: none;
        }

        .heart-burst .mini-heart {
            position: absolute;
            font-size: 1.2rem;
            opacity: 0;
        }

        .padlock-wrapper.unlocking .mini-heart {
            animation: heartBurst 1.5s ease forwards;
        }

        /* Unlock success text */
        .unlock-success-text {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            bottom: -40px;
            font-family: 'Dancing Script', cursive;
            font-size: 1.2rem;
            color: var(--gold);
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.5s ease, transform 0.5s ease;
        }

        .padlock-wrapper.unlocking .unlock-success-text {
            opacity: 1;
            transform: translateX(-50%) translateY(5px);
        }

        .padlock-wrapper.fly-away .unlock-success-text {
            opacity: 0;
        }

        .glow-ring {
            display: none;
        }

        .padlock-wrapper.shake {
            animation: padlockShake 0.6s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
        }

        /* Lock screen floating particles */
        #lock-particles {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            border-radius: 50%;
            pointer-events: none;
            opacity: 0;
        }

        .particle.snow-p {
            background: var(--blue-light);
            animation: floatSnow linear infinite;
        }

        .particle.island-p {
            background: var(--pink);
            animation: floatIsland linear infinite;
        }

        /* Password area */
        .password-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            opacity: 0;
            animation: fadeInUp 1s ease forwards 0.8s;
        }

        .password-input {
            width: 240px;
            padding: 14px 24px;
            border: 2px solid rgba(49, 130, 189, 0.25);
            border-radius: 50px;
            font-family: 'Poppins', sans-serif;
            font-size: 1.1rem;
            text-align: center;
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(15px);
            outline: none;
            transition: all 0.4s ease;
            letter-spacing: 10px;
            color: var(--blue-dark);
        }

        .password-input::placeholder {
            letter-spacing: 3px;
            color: #bbb;
        }

        .password-input:focus {
            border-color: var(--blue);
            box-shadow: 0 0 0 4px rgba(49, 130, 189, 0.1), 0 0 20px rgba(49, 130, 189, 0.15);
            background: rgba(255, 255, 255, 0.9);
        }

        .password-input.error {
            border-color: #e74c3c;
            box-shadow: 0 0 0 4px rgba(231, 76, 60, 0.1);
        }

        .unlock-btn {
            padding: 12px 48px;
            background: linear-gradient(135deg, var(--pink) 0%, var(--blue) 100%);
            color: white;
            border: none;
            border-radius: 50px;
            font-family: 'Poppins', sans-serif;
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(49, 130, 189, 0.3);
            position: relative;
            overflow: hidden;
        }

        .unlock-btn::before {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.25), transparent);
            transition: left 0.5s ease;
        }

        .unlock-btn:hover::before { left: 100%; }

        .unlock-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(49, 130, 189, 0.4);
        }

        .unlock-btn:active { transform: translateY(-1px); }

        .error-msg {
            color: #e74c3c;
            font-size: 0.85rem;
            height: 20px;
            transition: all 0.3s;
        }

        /* ====== SPARKLE / CONFETTI OVERLAY ====== */
        .sparkle-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 10000;
        }

        .sparkle {
            position: absolute;
            border-radius: 50%;
            animation: sparkleAnim 1.8s ease forwards;
        }

        .sparkle-star {
            position: absolute;
            animation: sparkleStarAnim 1.5s ease forwards;
            font-size: 1rem;
        }

        /* ====================================================
           DASHBOARD
        ==================================================== */
        #dashboard {
            opacity: 0;
            transition: opacity 1.2s ease;
            min-height: 100vh;
        }

        #dashboard.visible { opacity: 1; }

        /* ====== HERO SECTION ====== */
        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(180deg, var(--island) 0%, var(--snow) 30%, var(--snow) 70%, #e8eef5 100%);
            position: relative;
            overflow: hidden;
            padding: 2rem;
        }

        /* Hero canvas for snow & leaf particles */
        #hero-canvas {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: -50%; left: -50%;
            width: 200%; height: 200%;
            background: radial-gradient(circle at 20% 20%, rgba(225, 142, 150, 0.06) 0%, transparent 50%),
                        radial-gradient(circle at 80% 80%, rgba(49, 130, 189, 0.06) 0%, transparent 50%);
            animation: rotateGradient 30s linear infinite;
        }

        /* Decorative circles in hero */
        .hero-deco-left, .hero-deco-right {
            position: absolute;
            border-radius: 50%;
            pointer-events: none;
            z-index: 0;
        }

        .hero-deco-left {
            top: 10%; left: -5%;
            width: 300px; height: 300px;
            background: radial-gradient(circle, rgba(225, 142, 150, 0.08) 0%, transparent 70%);
            animation: floatDeco 8s ease-in-out infinite;
        }

        .hero-deco-right {
            bottom: 10%; right: -5%;
            width: 350px; height: 350px;
            background: radial-gradient(circle, rgba(49, 130, 189, 0.08) 0%, transparent 70%);
            animation: floatDeco 8s ease-in-out infinite 4s;
        }

        .hero-title {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2rem, 5vw, 3.5rem);
            color: var(--blue-dark);
            text-align: center;
            position: relative;
            z-index: 2;
            opacity: 0;
            transform: translateY(30px);
        }

        .hero-title .island-text { color: var(--pink-dark); }
        .hero-title .snow-text { color: var(--blue); }

        .hero-message {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(1.2rem, 3vw, 1.8rem);
            color: var(--pink);
            margin-top: 1rem;
            position: relative;
            z-index: 2;
            opacity: 0;
            transform: translateY(30px);
        }

        .hero-divider {
            width: 200px;
            height: 2px;
            background: linear-gradient(90deg, var(--pink), transparent, var(--blue));
            margin: 1.5rem 0;
            position: relative;
            z-index: 2;
            opacity: 0;
        }

        .scroll-indicator {
            position: absolute;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            color: var(--blue-light);
            font-size: 0.85rem;
            opacity: 0;
            animation: bounce 2s ease infinite 2.5s;
            z-index: 2;
        }

        .scroll-indicator svg {
            width: 24px; height: 24px;
            fill: var(--blue-light);
        }

        /* ====== MASCOT SECTION ====== */
        .mascot-section {
            padding: 5rem 2rem;
            max-width: 1100px;
            margin: 0 auto;
        }

        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            text-align: center;
            margin-bottom: 1rem;
            color: var(--blue-dark);
        }

        .section-subtitle {
            text-align: center;
            color: #888;
            font-size: 0.95rem;
            margin-bottom: 3rem;
            font-style: italic;
        }

        .mascot-image-container {
            text-align: center;
            margin-bottom: 3rem;
        }

        .mascot-image-container img {
            max-width: 100%;
            width: 500px;
            border-radius: 20px;
            filter: drop-shadow(0 10px 30px rgba(0,0,0,0.1));
        }

        .mascot-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .mascot-card {
            background: white;
            border-radius: 20px;
            padding: 2.5rem 2rem;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.06);
            transition: transform 0.4s ease, box-shadow 0.4s ease;
            opacity: 0;
            transform: translateY(40px);
        }

        .mascot-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
        }

        .mascot-card.lolo { border-top: 4px solid var(--pink); }
        .mascot-card.lolo::before {
            content: '';
            position: absolute;
            top: 0; right: 0;
            width: 150px; height: 150px;
            background: radial-gradient(circle, rgba(225, 142, 150, 0.1) 0%, transparent 70%);
            border-radius: 50%;
            transform: translate(30%, -30%);
        }

        .mascot-card.jojo { border-top: 4px solid var(--blue); }
        .mascot-card.jojo::before {
            content: '';
            position: absolute;
            top: 0; right: 0;
            width: 150px; height: 150px;
            background: radial-gradient(circle, rgba(49, 130, 189, 0.1) 0%, transparent 70%);
            border-radius: 50%;
            transform: translate(30%, -30%);
        }

        .mascot-emoji {
            margin-bottom: 1rem;
        }

        .mascot-emoji img {
            width: 120px;
            height: 120px;
            object-fit: cover;
            border-radius: 50%;
            border: 3px solid #f0f4f8;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .mascot-card.lolo .mascot-emoji img {
            border-color: var(--pink-light);
        }

        .mascot-card.jojo .mascot-emoji img {
            border-color: var(--blue-light);
        }

        .mascot-name {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            margin-bottom: 0.3rem;
        }
        .mascot-card.lolo .mascot-name { color: var(--pink-dark); }
        .mascot-card.jojo .mascot-name { color: var(--blue-dark); }

        .mascot-title-tag {
            font-size: 0.85rem;
            font-weight: 500;
            margin-bottom: 1rem;
            display: inline-block;
            padding: 4px 14px;
            border-radius: 20px;
        }
        .mascot-card.lolo .mascot-title-tag { background: rgba(225, 142, 150, 0.15); color: var(--pink-dark); }
        .mascot-card.jojo .mascot-title-tag { background: rgba(49, 130, 189, 0.15); color: var(--blue-dark); }

        .mascot-stats {
            display: flex;
            flex-wrap: wrap;
            gap: 0.8rem;
            margin-bottom: 1.2rem;
        }

        .mascot-stat {
            font-size: 0.8rem;
            padding: 5px 12px;
            border-radius: 15px;
            background: #f8f9fa;
            color: #666;
        }

        .mascot-desc {
            font-size: 0.92rem;
            line-height: 1.7;
            color: #555;
        }

        /* ====== PHILOSOPHY SECTION ====== */
        .philosophy-section {
            padding: 5rem 2rem;
            background: linear-gradient(135deg, rgba(225, 142, 150, 0.05) 0%, rgba(49, 130, 189, 0.05) 100%);
        }

        .philosophy-content {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        .philosophy-quote {
            font-family: 'Playfair Display', serif;
            font-size: clamp(1.1rem, 3vw, 1.5rem);
            font-style: italic;
            color: #555;
            line-height: 1.8;
            position: relative;
            padding: 2rem 0;
            opacity: 0;
            transform: translateY(30px);
        }

        .philosophy-quote::before {
            content: '\201C';
            font-size: 4rem;
            color: var(--pink-light);
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Playfair Display', serif;
        }

        .philosophy-details {
            margin-top: 2rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            max-width: 1000px;
            margin-left: auto;
            margin-right: auto;
        }

        .philosophy-item {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.04);
            opacity: 0;
            transform: translateY(20px);
        }

        .philosophy-item .icon { font-size: 2rem; margin-bottom: 0.8rem; }

        .philosophy-item h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            color: var(--blue-dark);
        }

        .philosophy-item p {
            font-size: 0.88rem;
            color: #777;
            line-height: 1.6;
        }

        .philosophy-house {
            margin-top: 3rem;
            text-align: center;
        }

        .philosophy-house img {
            max-width: 100%;
            width: 450px;
            border-radius: 20px;
            filter: drop-shadow(0 10px 30px rgba(0,0,0,0.1));
            transition: transform 0.4s ease;
        }

        .philosophy-house img:hover {
            transform: scale(1.03);
        }

        .philosophy-house-caption {
            margin-top: 1rem;
            font-family: 'Dancing Script', cursive;
            font-size: 1.1rem;
            color: #888;
        }

        /* ====== GLOBE DISTANCE SECTION ====== */
        .globe-section {
            padding: 5rem 2rem 3rem;
            text-align: center;
            background: linear-gradient(180deg, #0a1628 0%, #0d2137 40%, #132d4a 70%, #0a1628 100%);
            position: relative;
            overflow: hidden;
        }

        .globe-section .section-title {
            color: #e0eaf5;
        }

        .globe-section .section-subtitle {
            color: rgba(255,255,255,0.5);
        }

        .globe-container {
            width: 100%;
            max-width: 700px;
            height: 500px;
            margin: 0 auto 2rem;
            position: relative;
            border-radius: 20px;
            overflow: hidden;
        }

        #globe-viz {
            width: 100%;
            height: 100%;
        }

        #globe-viz canvas {
            outline: none;
        }

        .distance-info {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
            flex-wrap: wrap;
            margin-bottom: 2rem;
        }

        .distance-card {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            background: rgba(255,255,255,0.07);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
            padding: 1rem 1.5rem;
            border-radius: 16px;
        }

        .distance-icon {
            font-size: 2rem;
        }

        .distance-place h4 {
            color: #e0eaf5;
            font-family: 'Playfair Display', serif;
            font-size: 1.1rem;
        }

        .distance-place p {
            color: rgba(255,255,255,0.5);
            font-size: 0.8rem;
        }

        .distance-line {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .distance-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--pink);
            box-shadow: 0 0 8px var(--pink);
        }

        .distance-line .distance-dot:last-child {
            background: var(--blue-light);
            box-shadow: 0 0 8px var(--blue-light);
        }

        .distance-dash {
            width: 40px;
            height: 2px;
            background: linear-gradient(90deg, var(--pink), var(--blue-light));
            opacity: 0.5;
        }

        .distance-value {
            color: white;
            font-family: 'Playfair Display', serif;
            font-size: 1.1rem;
            font-weight: 700;
            white-space: nowrap;
            text-shadow: 0 0 20px rgba(49,130,189,0.5);
        }

        .distance-quote {
            color: rgba(255,255,255,0.6);
            font-size: 0.95rem;
            max-width: 500px;
            margin: 0 auto 1rem;
            line-height: 1.7;
        }

        .distance-date {
            color: rgba(255,255,255,0.35);
            font-size: 0.85rem;
            letter-spacing: 2px;
        }

        @media (max-width: 768px) {
            .globe-section {
                padding: 3rem 1rem 2rem;
            }
            .globe-container {
                height: 300px;
                max-width: 100%;
                border-radius: 12px;
            }
            .distance-info {
                flex-direction: column;
                align-items: center;
                gap: 0;
            }
            .distance-card {
                padding: 0.8rem 1.2rem;
                width: 100%;
                max-width: 280px;
            }
            .distance-line {
                flex-direction: column;
                transform: none;
                margin: 0.5rem 0;
                gap: 0.3rem;
            }
            .distance-dash {
                width: 2px;
                height: 20px;
                background: linear-gradient(180deg, var(--pink), var(--blue-light));
            }
            .distance-value {
                font-size: 0.95rem;
                writing-mode: horizontal-tb;
            }
            .distance-quote {
                font-size: 0.85rem;
                padding: 0 0.5rem;
            }
            .distance-date {
                font-size: 0.75rem;
            }
        }

        /* ====== COUNTDOWN SECTION ====== */
        .countdown-section {
            padding: 5rem 2rem;
            text-align: center;
            background: linear-gradient(180deg, var(--snow) 0%, #e8eef5 50%, var(--snow) 100%);
            position: relative;
        }

        .anniversary-badge {
            display: inline-block;
            padding: 8px 24px;
            background: linear-gradient(135deg, var(--pink) 0%, var(--blue) 100%);
            color: white;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 15px rgba(49, 130, 189, 0.3);
        }

        .years-together {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2rem, 6vw, 4rem);
            background: linear-gradient(135deg, var(--pink-dark) 0%, var(--blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .years-label {
            font-size: 1.1rem;
            color: #888;
            margin-bottom: 2.5rem;
        }

        .countdown-grid {
            display: flex;
            justify-content: center;
            gap: clamp(1rem, 3vw, 2rem);
            flex-wrap: wrap;
            margin-bottom: 2rem;
        }

        .countdown-item {
            background: white;
            border-radius: 16px;
            padding: 1.5rem 1rem;
            min-width: 100px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.06);
            position: relative;
            overflow: hidden;
        }

        .countdown-item::after {
            content: '';
            position: absolute;
            bottom: 0; left: 0;
            width: 100%; height: 3px;
            background: linear-gradient(90deg, var(--pink), var(--blue));
        }

        .countdown-number {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2rem, 4vw, 2.8rem);
            font-weight: 700;
            color: var(--blue-dark);
            line-height: 1;
        }

        .countdown-label {
            font-size: 0.8rem;
            color: #999;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-top: 0.5rem;
        }

        .next-anniversary-date {
            font-size: 0.95rem;
            color: #888;
            margin-top: 1rem;
        }
        .next-anniversary-date strong { color: var(--blue); }

        /* ====== SPECIAL MESSAGE ====== */
        .message-section {
            padding: 5rem 2rem;
            text-align: center;
            background: linear-gradient(135deg, rgba(225, 142, 150, 0.08) 0%, rgba(49, 130, 189, 0.08) 100%);
        }

        .message-heart {
            font-size: 3rem;
            margin-bottom: 1rem;
            animation: heartbeat 1.5s ease infinite;
        }

        /* ====== LOVE LETTER / ENVELOPE SECTION ====== */
        .letter-section {
            padding: 5rem 2rem 4rem;
            text-align: center;
            background: linear-gradient(180deg, #fdf6f0 0%, #fff5f5 30%, #f0e6f0 60%, #e8eef5 100%);
            position: relative;
            overflow: hidden;
            min-height: 100vh;
        }

        .letter-section::before {
            content: '';
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: radial-gradient(circle at 20% 30%, rgba(225, 142, 150, 0.08) 0%, transparent 50%),
                        radial-gradient(circle at 80% 70%, rgba(49, 130, 189, 0.06) 0%, transparent 50%);
            pointer-events: none;
        }

        .letter-section .section-title {
            color: var(--pink-dark);
        }

        .letter-section .section-subtitle {
            color: #999;
            margin-bottom: 2.5rem;
        }

        /* ============ PHOTO BOOTH SECTION ============ */
        .photobooth-section {
            min-height: 100vh;
            padding: 5rem 2rem;
            background: linear-gradient(180deg, #1a1a2e 0%, #16213e 40%, #0f3460 100%);
            position: relative;
            overflow: hidden;
        }

        .photobooth-section .section-title {
            color: #ffffff;
        }

        .photobooth-section .section-subtitle {
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 2rem;
        }

        .live-booth-container {
            max-width: 600px;
            margin: 0 auto;
        }

        .booth-frame {
            background: linear-gradient(145deg, #1e1e3a, #1a1a30);
            border: 3px solid var(--pink);
            border-radius: 20px;
            padding: 20px;
            position: relative;
            box-shadow: 0 0 40px rgba(225, 142, 150, 0.15), inset 0 0 30px rgba(0,0,0,0.3);
        }

        .camera-container {
            position: relative;
            width: 100%;
            aspect-ratio: 4 / 3;
            background: #000;
            border-radius: 12px;
            overflow: hidden;
        }

        #boothCameraFeed {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transform: scaleX(-1);
        }

        #boothCanvas {
            display: none;
        }

        .camera-placeholder {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: rgba(255,255,255,0.4);
            font-size: 3rem;
            gap: 0.5rem;
        }

        .camera-placeholder span {
            font-size: 0.9rem;
            font-family: 'Poppins', sans-serif;
        }

        /* Countdown overlay */
        .booth-countdown {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            display: none;
            align-items: center;
            justify-content: center;
            background: rgba(0,0,0,0.5);
            z-index: 10;
        }

        .booth-countdown span {
            font-size: 5rem;
            font-weight: 700;
            color: white;
            text-shadow: 0 0 30px rgba(225, 142, 150, 0.8);
            animation: countdownPop 1s ease-in-out;
        }

        @keyframes countdownPop {
            0% { transform: scale(2); opacity: 0; }
            50% { transform: scale(1); opacity: 1; }
            100% { transform: scale(0.8); opacity: 0.7; }
        }

        /* Flash */
        .booth-flash {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: white;
            opacity: 0;
            pointer-events: none;
            z-index: 11;
            transition: opacity 0.15s ease;
        }

        .booth-flash.active {
            opacity: 1;
        }

        /* Photo counter badge */
        .booth-photo-counter {
            position: absolute;
            top: 12px;
            right: 12px;
            background: rgba(225, 142, 150, 0.9);
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            z-index: 5;
            display: none;
        }

        /* Controls */
        .booth-controls {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 1.2rem;
        }

        .booth-action-btns {
            display: flex;
            gap: 0.8rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .booth-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 30px;
            font-family: 'Poppins', sans-serif;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .booth-btn-start {
            background: linear-gradient(135deg, var(--blue) 0%, var(--blue-dark) 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(49, 130, 189, 0.4);
        }

        .booth-btn-start:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(49, 130, 189, 0.6);
        }

        .booth-btn-capture {
            background: linear-gradient(135deg, var(--pink) 0%, var(--pink-dark) 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(225, 142, 150, 0.4);
        }

        .booth-btn-capture:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(225, 142, 150, 0.6);
        }

        .booth-btn-capture:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .booth-btn-retake {
            background: linear-gradient(135deg, #666 0%, #444 100%);
            color: white;
        }

        .booth-btn-retake:hover {
            transform: translateY(-2px);
        }

        .booth-btn-download {
            background: linear-gradient(135deg, #4CAF50 0%, #388E3C 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
        }

        .booth-btn-download:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.6);
        }

        /* Filter buttons */
        .booth-filter-row {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .booth-filter-row p {
            width: 100%;
            text-align: center;
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.85rem;
            margin-bottom: 0.3rem;
        }

        .booth-filter-btn {
            padding: 8px 16px;
            border: 2px solid rgba(255,255,255,0.15);
            border-radius: 20px;
            background: rgba(255,255,255,0.05);
            color: rgba(255,255,255,0.7);
            font-family: 'Poppins', sans-serif;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .booth-filter-btn:hover {
            border-color: var(--pink-light);
            color: white;
        }

        .booth-filter-btn.active {
            background: linear-gradient(135deg, var(--pink) 0%, var(--pink-dark) 100%);
            border-color: var(--pink);
            color: white;
        }

        /* Timer option */
        .booth-timer-option {
            text-align: center;
        }

        .booth-timer-option label {
            color: rgba(255,255,255,0.6);
            font-size: 0.85rem;
            cursor: pointer;
        }

        .booth-timer-option input[type="checkbox"] {
            accent-color: var(--pink);
        }

        /* CSS Cam filters */
        #boothCameraFeed.warm { filter: sepia(0.3) saturate(1.3) brightness(1.1); }
        #boothCameraFeed.pink { filter: saturate(1.2) hue-rotate(-10deg) brightness(1.05); }
        #boothCameraFeed.vintage { filter: sepia(0.4) contrast(0.9) brightness(1.1); }
        #boothCameraFeed.bw { filter: grayscale(1) contrast(1.1); }
        #boothCameraFeed.cold { filter: saturate(0.8) hue-rotate(15deg) brightness(1.05); }

        /* 2x2 Grid preview */
        .booth-grid-preview {
            margin-top: 1.5rem;
            display: none;
        }

        .booth-grid-preview h3 {
            text-align: center;
            color: rgba(255,255,255,0.8);
            font-family: 'Playfair Display', serif;
            font-size: 1.1rem;
            margin-bottom: 0.8rem;
        }

        .booth-grid-frame {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 6px;
            background: white;
            padding: 12px;
            border-radius: 12px;
            position: relative;
        }

        .booth-grid-photo {
            aspect-ratio: 1;
            background: #f0e8e8;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            border: 2px solid #f0d0d5;
        }

        .booth-grid-photo span {
            font-size: 1.5rem;
            color: #dbb;
            font-weight: 700;
        }

        .booth-grid-photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 6px;
        }

        .booth-grid-photo.filled {
            border-color: var(--pink);
        }

        .booth-grid-watermark {
            text-align: center;
            padding: 8px 0 4px;
            grid-column: 1 / -1;
            font-family: 'Dancing Script', cursive;
            font-size: 0.9rem;
            color: var(--pink-dark);
        }

        /* Envelope */
        .envelope-wrapper {
            position: relative;
            width: 340px;
            height: 420px;
            margin: 0 auto 1rem;
            cursor: pointer;
        }

        .envelope {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 230px;
            perspective: 800px;
            overflow: visible;
            filter: drop-shadow(0 10px 35px rgba(196, 106, 115, 0.35));
            transition: filter 0.4s ease;
        }

        .envelope:hover {
            filter: drop-shadow(0 14px 45px rgba(196, 106, 115, 0.45));
        }

        /* --- Envelope back (full rectangle behind everything) --- */
        .envelope-back {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(160deg, #d4878f 0%, #c46a73 100%);
            border-radius: 6px;
            z-index: 1;
        }

        /* --- Letter paper: starts inside, slides up --- */
        .letter-paper {
            position: absolute;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%) translateY(0);
            width: 300px;
            height: 200px;
            background: linear-gradient(180deg, #ffffff 0%, #fef9f6 100%);
            border-radius: 6px 6px 4px 4px;
            padding: 22px 20px;
            z-index: 2;
            box-shadow: 0 -2px 12px rgba(0,0,0,0.06);
            transition: transform 1.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            overflow: hidden;
        }

        .letter-paper-lines {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .letter-paper-line {
            height: 2px;
            background: linear-gradient(90deg, #f0d8d8, #e8c4c4);
            border-radius: 2px;
        }

        .letter-paper-line:nth-child(1) { width: 65%; }
        .letter-paper-line:nth-child(2) { width: 90%; }
        .letter-paper-line:nth-child(3) { width: 78%; }
        .letter-paper-line:nth-child(4) { width: 85%; }
        .letter-paper-line:nth-child(5) { width: 60%; }
        .letter-paper-line:nth-child(6) { width: 72%; }

        .letter-paper-heart {
            text-align: center;
            font-size: 1.4rem;
            margin-top: 12px;
            opacity: 0.7;
        }

        /* --- Envelope front: V-shaped top like a real envelope --- */
        .envelope-front {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 100%;
            z-index: 3;
            clip-path: polygon(0 35%, 50% 0%, 100% 35%, 100% 100%, 0 100%);
        }

        /* Front face: the main visible part */
        .envelope-front-face {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(170deg, #e8a0a8 0%, #d98a93 40%, #cc7a84 100%);
            border-radius: 0 0 6px 6px;
        }

        /* Left fold shadow */
        .envelope-front-face::before {
            content: '';
            position: absolute;
            top: 0; left: 0;
            width: 50%; height: 100%;
            background: linear-gradient(135deg, rgba(0,0,0,0.06) 0%, transparent 50%);
        }

        /* Right fold shadow */
        .envelope-front-face::after {
            content: '';
            position: absolute;
            top: 0; right: 0;
            width: 50%; height: 100%;
            background: linear-gradient(225deg, rgba(0,0,0,0.04) 0%, transparent 50%);
        }

        /* --- Flap (triangular lid on top) --- */
        .envelope-flap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 130px;
            z-index: 4;
            transform-origin: center top;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .envelope-flap-shape {
            width: 100%;
            height: 100%;
            background: linear-gradient(180deg, #bf6870 0%, #c87a82 100%);
            clip-path: polygon(0 0, 100% 0, 50% 100%);
        }

        /* Envelope tap hint */
        .envelope-hint {
            position: absolute;
            bottom: -40px;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            font-size: 0.85rem;
            color: var(--pink);
            animation: hintFade 2s ease-in-out infinite;
        }

        @keyframes hintFade {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        /* ========= FLAP OPEN STATE (step 1) ========= */
        .envelope-wrapper.flap-open .envelope-flap {
            transform: rotateX(180deg);
        }

        .envelope-wrapper.flap-open .envelope-hint {
            opacity: 0;
            pointer-events: none;
        }

        /* ========= LETTER OUT STATE (step 2) ========= */
        .envelope-wrapper.letter-out .letter-paper {
            transform: translateX(-50%) translateY(-220px);
        }

        /* Full letter modal overlay */
        .letter-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(8px);
            z-index: 10001;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .letter-overlay.show {
            display: flex;
            opacity: 1;
        }

        .letter-full {
            background: linear-gradient(180deg, #fffaf5 0%, #fff8f0 100%);
            border-radius: 16px;
            max-width: 650px;
            width: 100%;
            max-height: 85vh;
            overflow-y: auto;
            padding: 3rem 2.5rem;
            position: relative;
            box-shadow: 0 25px 80px rgba(0,0,0,0.3);
            animation: letterSlideUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
            transform: translateY(50px);
            opacity: 0;
        }

        @keyframes letterSlideUp {
            to { transform: translateY(0); opacity: 1; }
        }

        /* Decorative top border */
        .letter-full::before {
            content: '';
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 4px;
            background: linear-gradient(90deg, var(--pink), var(--pink-light), var(--blue-light), var(--blue));
            border-radius: 16px 16px 0 0;
        }

        /* Decorative wax seal */
        .letter-wax {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--pink) 0%, var(--pink-dark) 100%);
            border-radius: 50%;
            margin: 0 auto 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 4px 20px rgba(225, 142, 150, 0.4), inset 0 -2px 6px rgba(0,0,0,0.1);
        }

        .letter-dear {
            font-family: 'Dancing Script', cursive;
            font-size: 1.6rem;
            color: var(--pink-dark);
            margin-bottom: 1.5rem;
        }

        .letter-body p {
            font-family: 'Poppins', sans-serif;
            font-size: 0.92rem;
            line-height: 1.9;
            color: #555;
            margin-bottom: 1.2rem;
            text-align: left;
        }

        .letter-body .letter-highlight {
            color: var(--pink-dark);
            font-weight: 500;
        }

        .letter-body .letter-verse {
            font-family: 'Playfair Display', serif;
            font-style: italic;
            color: #777;
            padding-left: 1.5rem;
            border-left: 3px solid var(--pink-light);
            margin: 1.5rem 0;
        }

        .letter-body .letter-bold {
            font-weight: 600;
            color: var(--blue-dark);
        }

        .letter-signature {
            text-align: right;
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(225, 142, 150, 0.2);
        }

        .letter-signature .sig-heart {
            font-size: 1.2rem;
            display: block;
            margin-bottom: 0.3rem;
        }

        .letter-signature .sig-name {
            font-family: 'Dancing Script', cursive;
            font-size: 1.4rem;
            color: var(--pink-dark);
        }

        .letter-close-btn {
            position: sticky;
            top: 0;
            float: right;
            background: rgba(0,0,0,0.05);
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            color: #999;
            z-index: 10;
        }

        .letter-close-btn:hover {
            background: rgba(225, 142, 150, 0.15);
            color: var(--pink-dark);
            transform: rotate(90deg);
        }

        /* Letter floating hearts */
        .letter-hearts-bg {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .letter-float-heart {
            position: absolute;
            font-size: 1rem;
            opacity: 0.06;
            animation: letterHeartFloat linear infinite;
        }

        @keyframes letterHeartFloat {
            0% { transform: translateY(100%) rotate(0deg); opacity: 0; }
            10% { opacity: 0.06; }
            90% { opacity: 0.06; }
            100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
        }

        /* Scrollbar for letter */
        .letter-full::-webkit-scrollbar {
            width: 6px;
        }
        .letter-full::-webkit-scrollbar-track {
            background: transparent;
        }
        .letter-full::-webkit-scrollbar-thumb {
            background: var(--pink-light);
            border-radius: 3px;
        }

        @media (max-width: 768px) {
            .letter-section {
                padding: 3rem 1rem 2.5rem;
                min-height: auto;
            }
            .envelope-wrapper {
                width: 280px;
                height: 360px;
            }
            .envelope {
                height: 190px;
            }
            .envelope-flap {
                height: 108px;
            }
            .letter-paper {
                width: 248px;
                height: 165px;
                padding: 16px;
            }
            .envelope-wrapper.letter-out .letter-paper {
                transform: translateX(-50%) translateY(-170px);
            }
            .letter-full {
                padding: 2rem 1.5rem;
                max-height: 90vh;
                border-radius: 12px;
            }
            .letter-overlay {
                padding: 1rem;
            }
            .letter-dear {
                font-size: 1.3rem;
            }
            .letter-body p {
                font-size: 0.85rem;
            }
        }

        /* ====== QR CODE SECTION ====== */
        .qr-section {
            padding: 5rem 2rem 4rem;
            text-align: center;
            background: linear-gradient(180deg, #0d1b2a 0%, #1b2838 50%, #0d1b2a 100%);
            position: relative;
            overflow: hidden;
        }

        .qr-section::before {
            content: '';
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: radial-gradient(circle at 30% 50%, rgba(225, 142, 150, 0.05) 0%, transparent 50%),
                        radial-gradient(circle at 70% 50%, rgba(49, 130, 189, 0.05) 0%, transparent 50%);
            pointer-events: none;
        }

        .qr-container {
            margin: 2rem auto;
            width: fit-content;
            position: relative;
        }

        .qr-image {
            width: 260px;
            height: 260px;
            object-fit: contain;
            border-radius: 20px;
            transition: transform 0.4s ease, box-shadow 0.4s ease;
            filter: drop-shadow(0 10px 40px rgba(225, 142, 150, 0.3));
        }

        .qr-image:hover {
            transform: scale(1.05);
            filter: drop-shadow(0 15px 50px rgba(225, 142, 150, 0.5));
        }

        .qr-button {
            display: inline-block;
            padding: 14px 36px;
            background: linear-gradient(135deg, var(--pink) 0%, var(--pink-dark) 100%);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-family: 'Poppins', sans-serif;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 6px 25px rgba(225, 142, 150, 0.4);
            position: relative;
            overflow: hidden;
        }

        .qr-button::before {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s ease;
        }

        .qr-button:hover::before {
            left: 100%;
        }

        .qr-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 35px rgba(225, 142, 150, 0.5);
        }

        @media (max-width: 768px) {
            .qr-section {
                padding: 3rem 1.5rem 2.5rem;
            }
            .qr-image {
                width: 200px;
                height: 200px;
            }
            .qr-button {
                padding: 12px 28px;
                font-size: 0.9rem;
            }
        }

        /* ====== FOOTER ====== */
        .footer {
            padding: 2rem;
            text-align: center;
            background: linear-gradient(135deg, var(--blue-dark) 0%, #2a3a5a 100%);
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.85rem;
        }
        .footer .names {
            font-family: 'Dancing Script', cursive;
            font-size: 1.3rem;
            color: white;
            margin-bottom: 0.5rem;
        }

        /* ====== GLOBAL FLOATING ELEMENTS ====== */
        .floating-elements {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .snowflake {
            position: absolute;
            color: rgba(49, 130, 189, 0.15);
            font-size: 1rem;
            animation: snowfall linear infinite;
        }

        .flower-petal {
            position: absolute;
            color: rgba(225, 142, 150, 0.15);
            font-size: 1rem;
            animation: petalFall linear infinite;
        }

        /* ====================================================
           KEYFRAME ANIMATIONS
        ==================================================== */
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes padlockFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }

        @keyframes unlockBounce {
            0% { transform: scale(1) rotate(0deg); }
            15% { transform: scale(1.08) rotate(-2deg); }
            30% { transform: scale(1.15) rotate(0deg); }
            50% { transform: scale(0.97) rotate(1deg); }
            70% { transform: scale(1.08) rotate(0deg); }
            100% { transform: scale(1.05); }
        }

        /* Shackle springs upward with bounce */
        @keyframes shackleSpringUp {
            0% { transform: translateY(0); }
            20% { transform: translateY(-5px); }
            40% { transform: translateY(-38px); }
            55% { transform: translateY(-28px); }
            70% { transform: translateY(-35px); }
            85% { transform: translateY(-30px); }
            100% { transform: translateY(-32px); }
        }

        @keyframes successPulse {
            0% { transform: scale(1.1); filter: brightness(1.3); }
            50% { transform: scale(1.15); filter: brightness(1.5); }
            100% { transform: scale(1.1); filter: brightness(1.3); }
        }

        @keyframes glowPulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.5; }
            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
        }

        @keyframes padlockShake {
            10%, 90% { transform: translateX(-1px) rotate(-1deg); }
            20%, 80% { transform: translateX(2px) rotate(1deg); }
            30%, 50%, 70% { transform: translateX(-4px) rotate(-2deg); }
            40%, 60% { transform: translateX(4px) rotate(2deg); }
        }

        @keyframes heartBurst {
            0% { transform: translate(0, 0) scale(0); opacity: 0; }
            20% { opacity: 1; transform: translate(var(--hx), var(--hy)) scale(1); }
            100% { transform: translate(calc(var(--hx) * 3), calc(var(--hy) * 3 - 40px)) scale(0); opacity: 0; }
        }

        @keyframes rotateGradient {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes floatDeco {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-20px) scale(1.05); }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateX(-50%) translateY(0); }
            40% { transform: translateX(-50%) translateY(-10px); }
            60% { transform: translateX(-50%) translateY(-5px); }
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            15% { transform: scale(1.15); }
            30% { transform: scale(1); }
            45% { transform: scale(1.1); }
        }

        @keyframes sparkleAnim {
            0% { transform: scale(0) rotate(0deg); opacity: 1; }
            50% { opacity: 1; }
            100% { transform: scale(1) rotate(180deg) translate(var(--tx), var(--ty)); opacity: 0; }
        }

        @keyframes sparkleStarAnim {
            0% { transform: scale(0) rotate(0deg); opacity: 1; }
            30% { opacity: 1; transform: scale(1.3) rotate(90deg) translate(var(--tx), var(--ty)); }
            100% { transform: scale(0) rotate(360deg) translate(calc(var(--tx) * 2), calc(var(--ty) * 2 - 50px)); opacity: 0; }
        }

        @keyframes snowfall {
            0% { transform: translateY(-10vh) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(110vh) rotate(360deg); opacity: 0; }
        }

        @keyframes petalFall {
            0% { transform: translateY(-10vh) rotate(0deg) translateX(0); opacity: 0; }
            10% { opacity: 1; }
            50% { transform: translateY(50vh) rotate(180deg) translateX(30px); }
            90% { opacity: 1; }
            100% { transform: translateY(110vh) rotate(360deg) translateX(-20px); opacity: 0; }
        }

        @keyframes floatSnow {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.3; }
            90% { opacity: 0.3; }
            100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
        }

        @keyframes floatIsland {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.2; }
            90% { opacity: 0.2; }
            100% { transform: translateY(-10vh) rotate(-360deg); opacity: 0; }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20% { transform: translateX(-10px); }
            40% { transform: translateX(10px); }
            60% { transform: translateX(-10px); }
            80% { transform: translateX(10px); }
        }

        /* Reveal animation */
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease, transform 0.8s ease;
        }
        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }

        /* ====== RESPONSIVE ====== */
        @media (max-width: 768px) {
            /* Lock Screen */
            .lock-title {
                font-size: 1.5rem;
                padding: 0 1.5rem;
            }
            .lock-subtitle {
                font-size: 1rem;
                margin-bottom: 1.5rem;
            }
            .padlock-wrapper {
                transform: scale(0.7);
                margin-bottom: 1.5rem;
            }
            .password-input {
                width: 200px;
                padding: 12px 20px;
                font-size: 1rem;
                letter-spacing: 8px;
            }
            .unlock-btn {
                padding: 10px 36px;
                font-size: 0.85rem;
            }

            /* Hero */
            .hero {
                min-height: 100vh;
                padding: 2rem 1.5rem;
            }
            .hero-deco-left, .hero-deco-right {
                display: none;
            }

            /* Mascot Section */
            .mascot-section {
                padding: 3rem 1rem;
            }
            .mascot-image-container img {
                width: 300px;
                border-radius: 16px;
            }
            .mascot-cards {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            .mascot-card {
                padding: 2rem 1.5rem;
            }
            .mascot-emoji img {
                width: 90px;
                height: 90px;
            }

            /* Philosophy */
            .philosophy-section {
                padding: 3rem 1rem;
            }
            .philosophy-details {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            .philosophy-item {
                padding: 1.5rem;
            }

            /* Countdown */
            .countdown-section {
                padding: 3rem 1rem;
            }
            .countdown-item {
                min-width: 70px;
                padding: 1rem 0.6rem;
            }
            .countdown-number {
                font-size: 1.8rem;
            }
            .countdown-label {
                font-size: 0.7rem;
                letter-spacing: 1px;
            }
            .years-label {
                font-size: 0.95rem;
            }

            /* Message & Footer */
            .message-section {
                padding: 3rem 1.5rem;
            }
            .message-heart {
                font-size: 2.5rem;
            }
            .footer {
                padding: 1.5rem 1rem;
                font-size: 0.8rem;
            }
            .footer .names {
                font-size: 1.1rem;
            }

            /* Global */
            .section-title {
                font-size: 1.5rem;
                margin-bottom: 0.8rem;
            }
            .section-subtitle {
                font-size: 0.85rem;
                margin-bottom: 2rem;
                padding: 0 0.5rem;
            }
        }

        @media (max-width: 400px) {
            .padlock-wrapper {
                transform: scale(0.6);
            }
            .password-input {
                width: 180px;
                font-size: 0.9rem;
            }
            .globe-container {
                height: 250px;
            }
            .countdown-item {
                min-width: 60px;
                padding: 0.8rem 0.5rem;
            }
            .countdown-number {
                font-size: 1.5rem;
            }
            .mascot-image-container img {
                width: 250px;
            }
        }
    </style>
</head>
<body>

    <!-- ============ LOCK SCREEN ============ -->
    <div id="lock-screen">
        <div id="lock-particles"></div>

        <h1 class="lock-title">Between Island and Snow</h1>
        <p class="lock-subtitle">Enter the key to our world âœ¨</p>

        <!-- Premium SVG Padlock -->
        <div class="padlock-wrapper" id="padlock">
            <div class="padlock-glow"></div>
            <div class="keyhole-glow"></div>

            <svg class="padlock-svg" viewBox="0 0 150 200" fill="none" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="bodyGrad" x1="25" y1="90" x2="125" y2="190" gradientUnits="userSpaceOnUse">
                        <stop offset="0%" stop-color="#3182BD"/>
                        <stop offset="100%" stop-color="#1e5a8a"/>
                    </linearGradient>
                    <linearGradient id="shackleGrad" x1="40" y1="20" x2="110" y2="95" gradientUnits="userSpaceOnUse">
                        <stop offset="0%" stop-color="#5da4d9"/>
                        <stop offset="100%" stop-color="#3182BD"/>
                    </linearGradient>
                    <linearGradient id="bodyShine" x1="30" y1="90" x2="75" y2="190" gradientUnits="userSpaceOnUse">
                        <stop offset="0%" stop-color="rgba(255,255,255,0.2)"/>
                        <stop offset="100%" stop-color="rgba(255,255,255,0)"/>
                    </linearGradient>
                    <filter id="lockShadow" x="-20%" y="-20%" width="140%" height="140%">
                        <feDropShadow dx="0" dy="4" stdDeviation="6" flood-color="#1e5a8a" flood-opacity="0.3"/>
                    </filter>
                </defs>

                <!-- Shackle (single U-shape, lifts upward on unlock) -->
                <path class="shackle-path" d="M45 95 V55 C45 30, 105 30, 105 55 V95"
                      stroke="url(#shackleGrad)" stroke-width="12" stroke-linecap="round" fill="none"/>

                <!-- Body -->
                <rect x="25" y="90" width="100" height="80" rx="14" fill="url(#bodyGrad)" filter="url(#lockShadow)"/>
                <!-- Body shine -->
                <rect x="25" y="90" width="100" height="80" rx="14" fill="url(#bodyShine)"/>
                <!-- Body border highlight -->
                <rect x="26" y="91" width="98" height="78" rx="13" fill="none" stroke="rgba(255,255,255,0.15)" stroke-width="1"/>

                <!-- Keyhole -->
                <circle cx="75" cy="125" r="9" fill="#f0f4f8"/>
                <path d="M75 132 L71 148 Q75 152 79 148 L75 132Z" fill="#f0f4f8"/>

                <!-- Keyhole inner shadow -->
                <circle cx="75" cy="125" r="5" fill="rgba(30,90,138,0.2)"/>
            </svg>

            <!-- Heart burst container -->
            <div class="heart-burst" id="heart-burst"></div>
            <!-- Glow ring -->
            <div class="glow-ring"></div>
            <!-- Success text -->
            <div class="unlock-success-text">Unlocked! âœ¨</div>
        </div>

        <div class="password-area">
            <input type="password" class="password-input" id="password-input" placeholder="â€¢â€¢â€¢â€¢" maxlength="10" autocomplete="off">
            <button class="unlock-btn" id="unlock-btn">Unlock ðŸ”“</button>
            <p class="error-msg" id="error-msg">&nbsp;</p>
        </div>
    </div>

    <!-- ============ SPARKLE OVERLAY ============ -->
    <div class="sparkle-overlay" id="sparkle-overlay"></div>

    <!-- ============ GLOBAL FLOATING ELEMENTS ============ -->
    <div class="floating-elements" id="floating-elements"></div>

    <!-- ============ DASHBOARD ============ -->
    <div id="dashboard">

        <!-- Hero -->
        <section class="hero" id="hero-section">
            <canvas id="hero-canvas"></canvas>
            <div class="hero-deco-left"></div>
            <div class="hero-deco-right"></div>

            <h1 class="hero-title reveal">
                Between <span class="island-text">Island</span> and <span class="snow-text">Snow</span>
            </h1>
            <div class="hero-divider reveal"></div>
            <p class="hero-message reveal">A story of two worlds, one love ðŸ’•</p>

            <div class="scroll-indicator">
                <span>Scroll Down</span>
                <svg viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/></svg>
            </div>
        </section>

        <!-- Mascot Section -->
        <section class="mascot-section" id="mascots">
            <h2 class="section-title reveal">Meet Our Mascots</h2>
            <p class="section-subtitle reveal">Two little characters from different worlds, brought together by love</p>

            <div class="mascot-image-container reveal">
                <img src="mascot.jpg" alt="Lolo and Jojo">
            </div>

            <div class="mascot-cards">
                <div class="mascot-card lolo reveal">
                    <div class="mascot-emoji"><img src="lolo.jpg" alt="Lolo"></div>
                    <h3 class="mascot-name">Lolo</h3>
                    <span class="mascot-title-tag">The Island Girl</span>
                    <div class="mascot-stats">
                        <span class="mascot-stat">ðŸŽ‚ October 13</span>
                        <span class="mascot-stat">ðŸ“ 150 cm</span>
                        <span class="mascot-stat">ðŸŒ¸ Pink</span>
                        <span class="mascot-stat">ðŸï¸ Indonesia</span>
                    </div>
                    <p class="mascot-desc">
                        Lolo the Island Girl is a small, lively mouse, standing just 150 cm tall with bright black eyes that sparkle with curiosity. She is pink all over, reflecting her love for the color and her warm, cheerful personality. Lolo is two years younger than Jojo, and she was born on October 13, just a few days after him. She is called the Island Girl because she comes from Indonesia, a little world full of sunshine and life. Inspired by Jerry from Tom and Jerry, which she loved watching as a child, Lolo is playful, talkative, humble, and loves to share her endless storiesâ€”so many that she often makes Jojo a little dizzy! Her energy brings joy and laughter, and even small moments with her feel lively and special.
                    </p>
                </div>

                <div class="mascot-card jojo reveal">
                    <div class="mascot-emoji"><img src="jojo.jpg" alt="Jojo"></div>
                    <h3 class="mascot-name">Jojo</h3>
                    <span class="mascot-title-tag">The Snowy Guy</span>
                    <div class="mascot-stats">
                        <span class="mascot-stat">ðŸŽ‚ October 4</span>
                        <span class="mascot-stat">ðŸ“ 184 cm</span>
                        <span class="mascot-stat">ðŸ’™ Blue</span>
                        <span class="mascot-stat">ðŸ”ï¸ Slovenia</span>
                    </div>
                    <p class="mascot-desc">
                        Jojo the Snowy Guy is a tall and friendly cat, standing at 184 cm with striking green eyes that sparkle with warmth and humor. His favorite color is blue, reflecting his calm, cool, and steady personality. He is two years older than Lolo, born on October 4 in Slovenia, a land of snowy winter region. Inspired by Tom from Tom and Jerry, Jojo may seem quiet and reserved, but underneath he carries a gentle heart and a love for his little Island Girl. Together with Lolo, they prove that even the coldest snow can melt with the warmth of island sunshine.
                    </p>
                </div>
            </div>
        </section>

        <!-- Philosophy Section -->
        <section class="philosophy-section" id="philosophy">
            <div class="philosophy-content">
                <h2 class="section-title reveal">Our Philosophy</h2>
                <p class="section-subtitle reveal">The meaning behind Island and Snow</p>

                <p class="philosophy-quote reveal">
                    Like an island surrounded by warm seas and a mountain draped in snow, we come from different worldsâ€”yet somehow, our hearts found the same rhythm. The island brings warmth, color, and life; the snow brings calm, strength, and wonder. Together, we are a beautiful balance.
                </p>

                <div class="philosophy-details">
                    <div class="philosophy-item reveal">
                        <div class="icon">ðŸï¸</div>
                        <h3>The Island</h3>
                        <p>Represents warmth, energy, and the vibrant spirit of Indonesia. Lolo carries the sunshine wherever she goes, filling every moment with color and joy.</p>
                    </div>
                    <div class="philosophy-item reveal">
                        <div class="icon">â„ï¸</div>
                        <h3>The Snow</h3>
                        <p>Represents calm, depth, and the quiet beauty of Slovenia. Jojo brings peace and steadiness, a gentle presence that makes everything feel safe.</p>
                    </div>
                    <div class="philosophy-item reveal">
                        <div class="icon">ðŸ’•</div>
                        <h3>Together</h3>
                        <p>Two different worlds creating one beautiful love story. The warmth of the island melts the snow, and the coolness of winter calms the tropical storm.</p>
                    </div>
                </div>

                <div class="philosophy-house reveal">
                    <img src="house.jpg" alt="Our Dream Home">
                    <p class="philosophy-house-caption">Our little dream â€” a home where island warmth meets snowy nights ðŸ¡</p>
                </div>
            </div>
        </section>
        <section class="globe-section" id="distance">
            <h2 class="section-title reveal">Our Distance</h2>
            <p class="section-subtitle reveal">13,536 miles apart â€” yet our hearts are always close</p>

            <div class="globe-container reveal">
                <div id="globe-viz"></div>
            </div>

            <div class="distance-info reveal">
                <div class="distance-card">
                    <div class="distance-icon">ðŸï¸</div>
                    <div class="distance-place">
                        <h4>Indonesia</h4>
                        <p>Lolo's Island</p>
                    </div>
                </div>

                <div class="distance-line">
                    <div class="distance-dot"></div>
                    <div class="distance-dash"></div>
                    <div class="distance-value">13,536 miles</div>
                    <div class="distance-dash"></div>
                    <div class="distance-dot"></div>
                </div>

                <div class="distance-card">
                    <div class="distance-icon">ðŸ”ï¸</div>
                    <div class="distance-place">
                        <h4>Slovenia</h4>
                        <p>Jojo's Snow</p>
                    </div>
                </div>
            </div>

            <p class="distance-quote reveal">
                <em>"But one thing I know â€” that I love him so much, although we're 13,536 miles far away."</em>
            </p>

            <p class="distance-date reveal">Indonesia â€” Slovenia, September 9th 2025</p>
        </section>

        <!-- Countdown Section -->
        <section class="countdown-section" id="countdown">
            <h2 class="section-title reveal">Our Journey Together</h2>
            <p class="section-subtitle reveal">Every day with you is a gift</p>

            <div class="anniversary-badge reveal" id="anniversary-badge">ðŸ’• Anniversary</div>
            <div class="years-together reveal" id="years-together">0 Years</div>
            <p class="years-label reveal">of love and counting...</p>

            <div class="countdown-grid reveal">
                <div class="countdown-item">
                    <div class="countdown-number" id="cd-days">000</div>
                    <div class="countdown-label">Days</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="cd-hours">00</div>
                    <div class="countdown-label">Hours</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="cd-minutes">00</div>
                    <div class="countdown-label">Minutes</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="cd-seconds">00</div>
                    <div class="countdown-label">Seconds</div>
                </div>
            </div>

            <p class="next-anniversary-date reveal" id="next-anniv-text"></p>
        </section>

        <!-- Special Message -->
        <section class="message-section">
            <div class="message-heart reveal">ðŸ’—</div>
            <h2 class="section-title reveal">Forever My Partner</h2>
            <div class="hero-divider reveal" style="margin: 1rem auto;"></div>
            <p class="hero-message reveal" style="margin-top: 1rem;">Lolo & Jojo â€” between island and snow, our love keeps growing ðŸŒºâ„ï¸</p>
        </section>

        <!-- Photo Booth Section -->
        <section class="photobooth-section" id="photo-booth">
            <h2 class="section-title reveal">Photo Booth</h2>
            <div class="hero-divider reveal" style="margin: 1rem auto;"></div>
            <p class="section-subtitle reveal">Take 4 photos together and create your own memory strip ðŸ“¸</p>

            <div class="live-booth-container reveal">
                <div class="booth-frame">
                    <div class="camera-container">
                        <video id="boothCameraFeed" autoplay playsinline></video>
                        <canvas id="boothCanvas"></canvas>
                        <div class="camera-placeholder" id="boothPlaceholder">
                            ðŸ“·
                            <span>Tap "Start Camera" to begin</span>
                        </div>
                        <div class="booth-countdown" id="boothCountdown"><span>3</span></div>
                        <div class="booth-flash" id="boothFlash"></div>
                        <div class="booth-photo-counter" id="boothPhotoCounter">
                            <span id="boothPhotoNum">1</span> / 4
                        </div>
                    </div>
                </div>

                <!-- Action buttons -->
                <div class="booth-controls">
                    <div class="booth-action-btns">
                        <button class="booth-btn booth-btn-start" id="boothStartBtn" onclick="boothStartCamera()">ðŸ“· Start Camera</button>
                        <button class="booth-btn booth-btn-capture" id="boothCaptureBtn" style="display:none;" onclick="boothCapture()">ðŸ“¸ Capture <span id="boothCaptureCount">(1/4)</span></button>
                        <button class="booth-btn booth-btn-retake" id="boothRetakeBtn" style="display:none;" onclick="boothReset()">ðŸ”„ Retake</button>
                        <button class="booth-btn booth-btn-download" id="boothDownloadBtn" style="display:none;" onclick="boothDownload()">ðŸ’¾ Download</button>
                    </div>

                    <!-- Filters -->
                    <div class="booth-filter-row">
                        <p>Choose Filter:</p>
                        <button class="booth-filter-btn active" data-booth-filter="none">Normal</button>
                        <button class="booth-filter-btn" data-booth-filter="warm">Warm ðŸŒ…</button>
                        <button class="booth-filter-btn" data-booth-filter="pink">Pink ðŸ’•</button>
                        <button class="booth-filter-btn" data-booth-filter="vintage">Vintage ðŸ“·</button>
                        <button class="booth-filter-btn" data-booth-filter="bw">B&W ðŸ–¤</button>
                        <button class="booth-filter-btn" data-booth-filter="cold">Cold â„ï¸</button>
                    </div>

                    <!-- Timer -->
                    <div class="booth-timer-option">
                        <label><input type="checkbox" id="boothUseTimer" checked> Use 3-second timer</label>
                    </div>
                </div>

                <!-- 2x2 Grid preview -->
                <div class="booth-grid-preview" id="boothGridPreview">
                    <h3>ðŸ“¸ Your Photo Strip</h3>
                    <div class="booth-grid-frame" id="boothGridFrame">
                        <div class="booth-grid-photo" id="boothGrid1"><span>1</span></div>
                        <div class="booth-grid-photo" id="boothGrid2"><span>2</span></div>
                        <div class="booth-grid-photo" id="boothGrid3"><span>3</span></div>
                        <div class="booth-grid-photo" id="boothGrid4"><span>4</span></div>
                        <div class="booth-grid-watermark">ðŸ’• Between Island and Snow ðŸ’•</div>
                    </div>
                    <canvas id="boothGridCanvas" style="display:none;"></canvas>
                </div>
            </div>
        </section>

        <!-- Love Letter Section -->
        <section class="letter-section" id="love-letter">
            <h2 class="section-title reveal">A Letter For You</h2>
            <p class="section-subtitle reveal">I wrote something from my heart â€” tap the envelope to read</p>

            <div class="envelope-wrapper reveal" id="envelope" onclick="openEnvelope()">
                <!-- Envelope -->
                <div class="envelope">
                    <!-- Back layer -->
                    <div class="envelope-back"></div>

                    <!-- Letter paper (between back and front, slides up) -->
                    <div class="letter-paper">
                        <div class="letter-paper-lines">
                            <div class="letter-paper-line"></div>
                            <div class="letter-paper-line"></div>
                            <div class="letter-paper-line"></div>
                            <div class="letter-paper-line"></div>
                            <div class="letter-paper-line"></div>
                            <div class="letter-paper-line"></div>
                        </div>
                        <div class="letter-paper-heart">ðŸ’Œ</div>
                    </div>

                    <!-- Front face (covers the letter) -->
                    <div class="envelope-front">
                        <div class="envelope-front-face"></div>
                    </div>

                    <!-- Flap (triangular lid) -->
                    <div class="envelope-flap">
                        <div class="envelope-flap-shape"></div>
                    </div>
                </div>

                <p class="envelope-hint">âœ¨ Tap to open âœ¨</p>
            </div>
        </section>

        <!-- Letter Overlay (modal) -->
        <div class="letter-overlay" id="letter-overlay" onclick="closeLetterOverlay(event)">
            <div class="letter-full" id="letter-full" onclick="event.stopPropagation()">
                <button class="letter-close-btn" onclick="closeLetter()">âœ•</button>
                <div class="letter-wax">ðŸ¤</div>
                <div class="letter-dear">Dear, Jonathan Prah</div>
                <div class="letter-body">
                    <p>Iâ€™ve been staring at this page for a while, trying to find the right way to start. I donâ€™t think thereâ€™s a perfect beginning for something that means this much. So maybe Iâ€™ll just start simplyâ€”with you.</p>
                    <p class="letter-highlight">This website exists because of you.</p>
                    <p>I didnâ€™t build it alone. Dedes and her boyfriend helped me bring it to life, but every single detail inside it carries my feelings for you. Every color choice, every little character, every idea about island and snowâ€¦ itâ€™s all connected to us. I wanted to create something you could open whenever you miss me. Something that feels like a small piece of my heart, carefully wrapped and sent across the world to you.</p>
                    <p class="letter-verse">Sometimes I still canâ€™t believe our story is real.</p>
                    <p>You were born under snowy skies, on October 4th, in a place so different from mine. I was born on October 13th, just nine days after you, on a warm island surrounded by ocean air and sunlight. You are two years older than me, taller, calmer, steadier. I am smaller, louder, always talking, always telling stories that never seem to end.</p>
                    <p>And somehow, despite all of thatâ€”despite the distance, the cultures, the languages, the time zonesâ€”<span class="letter-bold">we found each other.</span></p>
                    <p>It feels like something out of a story. The Island Girl and the Snowy Guy. Pink and blue. Warmth and winter. Noise and silence. And instead of clashing, we fit.</p>
                    <p>I know loving each other from far away is not easy. There are nights when I wish I could just rest my head on your shoulder instead of my pillow. There are days when I wish I could see your green eyes in front of me instead of through a screen. There are moments when the distance feels heavy, like something physical pressing against my chest. But even in those moments, <span class="letter-highlight">I have never doubted my feelings for you.</span></p>
                    <p class="letter-verse">You are my calm when my thoughts are too loud.<br>You are my steady when my emotions run wild.<br>You are the one who listens to my endless storiesâ€”even when they make no sense, even when they go on forever, even when they probably make you dizzy. And you still stay.</p>
                    <p>You donâ€™t just hear me. You <span class="letter-bold">listen.</span><br>You donâ€™t just talk to me. You <span class="letter-bold">understand</span> me.<br>And that is rare.</p>
                    <p>I love the way you are gentle without trying too hard. I love the way you joke quietly, the way your humor isnâ€™t loud but always there. I love that you are strong but soft at the same time. I love that you are blueâ€”not just because itâ€™s your favorite color, but because it fits you. Calm, deep, steady.</p>
                    <p>And I know I can be chaotic. I know I can overthink. I know I can be dramatic and emotional and talk too much. But you never make me feel like I am <em>too much.</em> You never make me feel small. You make me feel safe being exactly who I am.</p>
                    <p class="letter-highlight">Thatâ€™s something I will always be grateful for.</p>
                    <p>This website is small compared to what I feel for you. Itâ€™s just pixels and code and designs. But behind it is effort. Behind it is time. Behind it is my heart trying to say, <span class="letter-bold">â€œYou matter to me more than you know.â€</span></p>
                    <p>Loving you has taught me patience. It has taught me trust. It has taught me that real love is not about convenienceâ€”itâ€™s about commitment. Itâ€™s about choosing each other even when it would be easier not to. Itâ€™s about staying even when the distance feels unfair.</p>
                    <p class="letter-verse">And I choose you.<br>Not because itâ€™s easy.<br>Not because itâ€™s perfect.<br>But because itâ€™s <strong>you.</strong></p>
                    <p>When I imagine the future, I donâ€™t see just miles and airports and countdowns. I see us laughing in the same room one day. I see simple mornings. I see quiet evenings. I see you teasing me. I see myself still talking too much while you pretend to complain but secretly smile.</p>
                    <p>I donâ€™t know exactly what our future will look like. I donâ€™t know how long this distance will test us. But I know thisâ€”<span class="letter-highlight">what we have is real.</span> And I am willing to protect it.</p>
                    <p>From my island to your snow, from my pink chaos to your blue calm, from my October heart to yoursâ€”<span class="letter-bold">thank you.</span></p>
                    <p class="letter-verse">Thank you for loving me.<br>Thank you for staying.<br>Thank you for being patient with me.<br>Thank you for choosing me.</p>
                    <p>No matter how far the map stretches between Indonesia and Slovenia, my heart will always know where home is.</p>
                    <p class="letter-highlight" style="font-size: 1rem;">With you. Always. ðŸ¤</p>
                </div>
                <div class="letter-signature">
                    <span class="sig-heart">ðŸ’•</span>
                    <span class="sig-name">â€” Dannisa Alodya Cheryl</span>
                </div>
                <div class="letter-hearts-bg" id="letter-hearts-bg"></div>
            </div>
        </div>

        <!-- Our Story QR Section -->
        <section class="qr-section" id="our-story">
            <h2 class="section-title reveal" style="color: #e0eaf5;">Our Story</h2>
            <p class="section-subtitle reveal" style="color: rgba(255,255,255,0.5);">Scan or tap to read our prologue</p>
            <div class="qr-container reveal">
                <a href="https://medium.com/@dannisaalodyacheryl/prologue-7cb83a742436" target="_blank" rel="noopener noreferrer">
                    <img src="qrcode.png" alt="QR Code - Our Story" class="qr-image">
                </a>
            </div>
            <a href="https://medium.com/@dannisaalodyacheryl/prologue-7cb83a742436" target="_blank" rel="noopener noreferrer" class="qr-button reveal">
                ðŸ“– Read Our Prologue
            </a>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p class="names">Lolo ðŸŒº & Jojo â„ï¸</p>
            <p>Between Island and Snow â€” Since September 9, 2025</p>
        </footer>
    </div>

    <script>
        // ============ CONFIG ============
        const CORRECT_PASSWORD = '9925';
        const ANNIVERSARY_DATE = new Date(2025, 8, 9); // September 9, 2025

        // ============ LOCK SCREEN PARTICLES ============
        function createLockParticles() {
            const container = document.getElementById('lock-particles');
            for (let i = 0; i < 30; i++) {
                const p = document.createElement('div');
                p.classList.add('particle');
                p.classList.add(Math.random() > 0.5 ? 'snow-p' : 'island-p');
                const size = Math.random() * 8 + 3;
                p.style.width = size + 'px';
                p.style.height = size + 'px';
                p.style.left = Math.random() * 100 + '%';
                p.style.bottom = '-20px';
                p.style.animationDuration = (Math.random() * 8 + 6) + 's';
                p.style.animationDelay = (Math.random() * 6) + 's';
                container.appendChild(p);
            }
        }

        // ============ HEART BURST (on unlock) ============
        function createHeartBurst() {
            const container = document.getElementById('heart-burst');
            const hearts = ['ðŸ’•', 'ðŸ’–', 'ðŸ’—', 'ðŸ’˜', 'âœ¨', 'ðŸŒ¸', 'â„ï¸', 'ðŸ’'];
            for (let i = 0; i < 12; i++) {
                const h = document.createElement('div');
                h.classList.add('mini-heart');
                h.textContent = hearts[i % hearts.length];
                const angle = (Math.PI * 2 / 12) * i;
                const dist = 25 + Math.random() * 20;
                h.style.setProperty('--hx', (Math.cos(angle) * dist) + 'px');
                h.style.setProperty('--hy', (Math.sin(angle) * dist) + 'px');
                h.style.animationDelay = (Math.random() * 0.3) + 's';
                container.appendChild(h);
            }
        }

        // ============ UNLOCK LOGIC ============
        const passwordInput = document.getElementById('password-input');
        const unlockBtn = document.getElementById('unlock-btn');
        const errorMsg = document.getElementById('error-msg');
        const padlock = document.getElementById('padlock');
        const lockScreen = document.getElementById('lock-screen');
        const dashboard = document.getElementById('dashboard');

        function attemptUnlock() {
            const pwd = passwordInput.value;
            if (pwd === CORRECT_PASSWORD) {
                errorMsg.innerHTML = '&nbsp;';
                passwordInput.disabled = true;
                unlockBtn.disabled = true;
                unlockBtn.textContent = 'ðŸ’–';

                // IMPORTANT: Freeze padlock visible before stopping animation
                padlock.classList.add('anim-ready');

                // Step 1 (200ms): Padlock bounces, shackle springs upward
                setTimeout(() => {
                    padlock.style.animation = 'unlockBounce 0.8s ease forwards';
                    padlock.classList.add('unlocking');
                }, 200);

                // Step 2 (700ms): Heart burst + keyhole glow
                setTimeout(() => {
                    createHeartBurst();
                }, 700);

                // Step 3 (1200ms): Sparkles & confetti burst from padlock
                setTimeout(() => {
                    createSparkles();
                    createConfetti();
                }, 1200);

                // Step 4 (1800ms): Full glow, shackle fully lifted
                setTimeout(() => {
                    padlock.classList.add('unlocked-full');
                    padlock.style.animation = 'successPulse 0.8s ease';
                }, 1800);

                // Step 5 (2600ms): Padlock flies away
                setTimeout(() => {
                    padlock.classList.add('fly-away');
                }, 2600);

                // Step 6 (3200ms): Fade lock screen
                setTimeout(() => {
                    lockScreen.classList.add('unlocked');
                }, 3200);

                // Step 7 (4400ms): Show dashboard & scroll to hero
                setTimeout(() => {
                    lockScreen.classList.add('hidden');
                    dashboard.classList.add('visible');
                    document.getElementById('hero-section').scrollIntoView({ behavior: 'instant' });
                    window.scrollTo(0, 0);
                    initDashboard();
                    createFloatingElements();
                }, 4400);

            } else {
                errorMsg.textContent = 'Wrong password, try again ðŸ’”';
                passwordInput.classList.add('error');
                padlock.classList.add('shake');
                setTimeout(() => {
                    passwordInput.classList.remove('error');
                    padlock.classList.remove('shake');
                }, 600);
                passwordInput.value = '';
                passwordInput.focus();
            }
        }

        unlockBtn.addEventListener('click', attemptUnlock);
        passwordInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') attemptUnlock();
        });

        // ============ SPARKLE BURST ============
        function createSparkles() {
            const overlay = document.getElementById('sparkle-overlay');
            const colors = ['#E18E96', '#3182BD', '#f0b8bd', '#5da4d9', '#FFD700', '#fff', '#ff69b4', '#ffd700'];
            const rect = padlock.getBoundingClientRect();
            const cx = rect.left + rect.width / 2;
            const cy = rect.top + rect.height / 2;

            // Wave 1: Fast small sparkles
            for (let i = 0; i < 50; i++) {
                const s = document.createElement('div');
                s.classList.add('sparkle');
                const size = Math.random() * 10 + 2;
                const angle = (Math.PI * 2 / 50) * i + Math.random() * 0.5;
                const dist = Math.random() * 250 + 50;
                const tx = Math.cos(angle) * dist;
                const ty = Math.sin(angle) * dist;

                s.style.width = size + 'px';
                s.style.height = size + 'px';
                s.style.left = cx + 'px';
                s.style.top = cy + 'px';
                s.style.background = colors[Math.floor(Math.random() * colors.length)];
                s.style.setProperty('--tx', tx + 'px');
                s.style.setProperty('--ty', ty + 'px');
                s.style.animationDelay = (Math.random() * 0.3) + 's';
                s.style.borderRadius = Math.random() > 0.3 ? '50%' : '2px';
                overlay.appendChild(s);
            }

            // Wave 2: Delayed bigger sparkles
            setTimeout(() => {
                for (let i = 0; i < 25; i++) {
                    const s = document.createElement('div');
                    s.classList.add('sparkle');
                    const size = Math.random() * 14 + 5;
                    const angle = (Math.PI * 2 / 25) * i;
                    const dist = Math.random() * 180 + 100;
                    const tx = Math.cos(angle) * dist;
                    const ty = Math.sin(angle) * dist - 30;

                    s.style.width = size + 'px';
                    s.style.height = size + 'px';
                    s.style.left = cx + 'px';
                    s.style.top = cy + 'px';
                    s.style.background = colors[Math.floor(Math.random() * colors.length)];
                    s.style.setProperty('--tx', tx + 'px');
                    s.style.setProperty('--ty', ty + 'px');
                    s.style.animationDelay = (Math.random() * 0.2) + 's';
                    s.style.borderRadius = '50%';
                    overlay.appendChild(s);
                }
            }, 400);

            setTimeout(() => { overlay.innerHTML = ''; }, 3500);
        }

        // ============ CONFETTI EFFECT ============
        function createConfetti() {
            const overlay = document.getElementById('sparkle-overlay');
            const emojis = ['âœ¨', 'ðŸ’•', 'ðŸŒ¸', 'â„ï¸', 'ðŸ’–', 'â­', 'ðŸŒº', 'ðŸ’—', 'ðŸ¦‹', 'ðŸ’'];
            const rect = padlock.getBoundingClientRect();
            const cx = rect.left + rect.width / 2;
            const cy = rect.top + rect.height / 2;

            for (let i = 0; i < 20; i++) {
                const s = document.createElement('div');
                s.classList.add('sparkle-star');
                s.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                const angle = (Math.PI * 2 / 20) * i + Math.random() * 0.5;
                const dist = Math.random() * 100 + 50;
                const tx = Math.cos(angle) * dist;
                const ty = Math.sin(angle) * dist;

                s.style.left = cx + 'px';
                s.style.top = cy + 'px';
                s.style.setProperty('--tx', tx + 'px');
                s.style.setProperty('--ty', ty + 'px');
                s.style.animationDelay = (Math.random() * 0.6) + 's';
                s.style.fontSize = (Math.random() * 1 + 0.8) + 'rem';
                overlay.appendChild(s);
            }
        }

        // ============ HERO CANVAS: SNOW & LEAF PARTICLE SYSTEM ============
        let heroAnimId = null;

        function initHeroCanvas() {
            const canvas = document.getElementById('hero-canvas');
            const hero = document.getElementById('hero-section');
            const ctx = canvas.getContext('2d');

            function resize() {
                canvas.width = hero.offsetWidth;
                canvas.height = hero.offsetHeight;
            }
            resize();
            window.addEventListener('resize', resize);

            // Snowflake particles (right side)
            const snowflakes = [];
            for (let i = 0; i < 35; i++) {
                snowflakes.push({
                    x: canvas.width * 0.4 + Math.random() * canvas.width * 0.65,
                    y: Math.random() * canvas.height,
                    r: Math.random() * 3 + 1,
                    speedY: Math.random() * 0.6 + 0.2,
                    speedX: Math.random() * 0.3 - 0.15,
                    opacity: Math.random() * 0.4 + 0.1,
                    swing: Math.random() * Math.PI * 2,
                    swingSpeed: Math.random() * 0.02 + 0.005,
                    swingDist: Math.random() * 30 + 10,
                });
            }

            // Leaf / petal particles (left side)
            const leaves = [];
            for (let i = 0; i < 20; i++) {
                leaves.push({
                    x: Math.random() * canvas.width * 0.6,
                    y: Math.random() * canvas.height,
                    size: Math.random() * 8 + 4,
                    speedY: Math.random() * 0.5 + 0.15,
                    speedX: Math.random() * 0.2 - 0.1,
                    rotation: Math.random() * Math.PI * 2,
                    rotSpeed: (Math.random() - 0.5) * 0.02,
                    opacity: Math.random() * 0.25 + 0.08,
                    swing: Math.random() * Math.PI * 2,
                    swingSpeed: Math.random() * 0.015 + 0.005,
                    swingDist: Math.random() * 40 + 15,
                    type: Math.random() > 0.5 ? 'petal' : 'leaf',
                });
            }

            function drawSnowflake(sf) {
                ctx.save();
                ctx.globalAlpha = sf.opacity;
                ctx.fillStyle = '#5da4d9';
                ctx.shadowColor = 'rgba(93, 164, 217, 0.3)';
                ctx.shadowBlur = 6;

                const x = sf.x + Math.sin(sf.swing) * sf.swingDist;
                const r = sf.r;

                if (r > 2) {
                    // Detailed snowflake with branches
                    ctx.strokeStyle = 'rgba(93, 164, 217, ' + sf.opacity + ')';
                    ctx.lineWidth = 0.8;
                    ctx.beginPath();
                    for (let k = 0; k < 6; k++) {
                        const angle = (Math.PI / 3) * k;
                        ctx.moveTo(x, sf.y);
                        ctx.lineTo(x + Math.cos(angle) * r * 2.5, sf.y + Math.sin(angle) * r * 2.5);
                        // Small branches
                        const bx = x + Math.cos(angle) * r * 1.5;
                        const by = sf.y + Math.sin(angle) * r * 1.5;
                        ctx.moveTo(bx, by);
                        ctx.lineTo(bx + Math.cos(angle + 0.5) * r, by + Math.sin(angle + 0.5) * r);
                        ctx.moveTo(bx, by);
                        ctx.lineTo(bx + Math.cos(angle - 0.5) * r, by + Math.sin(angle - 0.5) * r);
                    }
                    ctx.stroke();

                    // Center dot
                    ctx.beginPath();
                    ctx.arc(x, sf.y, r * 0.5, 0, Math.PI * 2);
                    ctx.fill();
                } else {
                    // Simple dot snowflake
                    ctx.beginPath();
                    ctx.arc(x, sf.y, r, 0, Math.PI * 2);
                    ctx.fill();
                }

                ctx.restore();
            }

            function drawLeaf(leaf) {
                ctx.save();
                const x = leaf.x + Math.sin(leaf.swing) * leaf.swingDist;
                ctx.translate(x, leaf.y);
                ctx.rotate(leaf.rotation);
                ctx.globalAlpha = leaf.opacity;

                if (leaf.type === 'petal') {
                    // Cherry blossom petal
                    ctx.fillStyle = '#E18E96';
                    ctx.shadowColor = 'rgba(225, 142, 150, 0.2)';
                    ctx.shadowBlur = 4;
                    ctx.beginPath();
                    ctx.moveTo(0, -leaf.size / 2);
                    ctx.bezierCurveTo(leaf.size / 2, -leaf.size / 2, leaf.size / 2, leaf.size / 3, 0, leaf.size / 2);
                    ctx.bezierCurveTo(-leaf.size / 2, leaf.size / 3, -leaf.size / 2, -leaf.size / 2, 0, -leaf.size / 2);
                    ctx.fill();
                } else {
                    // Tropical leaf
                    ctx.fillStyle = 'rgba(225, 142, 150, 0.6)';
                    ctx.beginPath();
                    ctx.ellipse(0, 0, leaf.size * 0.4, leaf.size, 0, 0, Math.PI * 2);
                    ctx.fill();
                    // Leaf vein
                    ctx.strokeStyle = 'rgba(196, 106, 115, 0.3)';
                    ctx.lineWidth = 0.5;
                    ctx.beginPath();
                    ctx.moveTo(0, -leaf.size);
                    ctx.lineTo(0, leaf.size);
                    ctx.stroke();
                }

                ctx.restore();
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // Update & draw snowflakes
                for (const sf of snowflakes) {
                    sf.y += sf.speedY;
                    sf.swing += sf.swingSpeed;
                    if (sf.y > canvas.height + 10) {
                        sf.y = -10;
                        sf.x = canvas.width * 0.4 + Math.random() * canvas.width * 0.65;
                    }
                    drawSnowflake(sf);
                }

                // Update & draw leaves
                for (const leaf of leaves) {
                    leaf.y += leaf.speedY;
                    leaf.rotation += leaf.rotSpeed;
                    leaf.swing += leaf.swingSpeed;
                    if (leaf.y > canvas.height + 20) {
                        leaf.y = -20;
                        leaf.x = Math.random() * canvas.width * 0.6;
                    }
                    drawLeaf(leaf);
                }

                heroAnimId = requestAnimationFrame(animate);
            }

            animate();
        }

        // ============ GLOBAL FLOATING ELEMENTS (subtle bg) ============
        function createFloatingElements() {
            const container = document.getElementById('floating-elements');
            const snowflakes = ['â„', 'â…', 'â†', 'âœ§'];
            const petals = ['ðŸŒ¸', 'ðŸŒº', 'âœ¿', 'â€'];

            for (let i = 0; i < 10; i++) {
                const sf = document.createElement('div');
                sf.classList.add('snowflake');
                sf.textContent = snowflakes[Math.floor(Math.random() * snowflakes.length)];
                sf.style.left = (Math.random() * 50 + 50) + '%';
                sf.style.animationDuration = (Math.random() * 12 + 10) + 's';
                sf.style.animationDelay = (Math.random() * 12) + 's';
                sf.style.fontSize = (Math.random() * 0.8 + 0.5) + 'rem';
                container.appendChild(sf);

                const fp = document.createElement('div');
                fp.classList.add('flower-petal');
                fp.textContent = petals[Math.floor(Math.random() * petals.length)];
                fp.style.left = (Math.random() * 50) + '%';
                fp.style.animationDuration = (Math.random() * 12 + 12) + 's';
                fp.style.animationDelay = (Math.random() * 12) + 's';
                fp.style.fontSize = (Math.random() * 0.8 + 0.5) + 'rem';
                container.appendChild(fp);
            }
        }

        // ============ SCROLL REVEAL ============
        function initReveal() {
            const reveals = document.querySelectorAll('.reveal');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach((entry, index) => {
                    if (entry.isIntersecting) {
                        setTimeout(() => {
                            entry.target.classList.add('active');
                        }, index * 80);
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });
            reveals.forEach(el => observer.observe(el));
        }

        // ============ ANNIVERSARY COUNTDOWN ============
        function updateCountdown() {
            const now = new Date();
            const annivMonth = ANNIVERSARY_DATE.getMonth();
            const annivDay = ANNIVERSARY_DATE.getDate();
            const annivYear = ANNIVERSARY_DATE.getFullYear();

            let yearsTogether = now.getFullYear() - annivYear;
            const annivThisYear = new Date(now.getFullYear(), annivMonth, annivDay);
            if (now < annivThisYear) yearsTogether--;

            document.getElementById('years-together').textContent = yearsTogether + (yearsTogether === 1 ? ' Year' : ' Years');
            document.getElementById('anniversary-badge').textContent = 'ðŸ’• ' + ordinal(yearsTogether) + ' Anniversary';

            let nextAnniv = new Date(now.getFullYear(), annivMonth, annivDay);
            if (now >= nextAnniv) nextAnniv = new Date(now.getFullYear() + 1, annivMonth, annivDay);

            const diff = nextAnniv - now;
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            document.getElementById('cd-days').textContent = String(days).padStart(3, '0');
            document.getElementById('cd-hours').textContent = String(hours).padStart(2, '0');
            document.getElementById('cd-minutes').textContent = String(minutes).padStart(2, '0');
            document.getElementById('cd-seconds').textContent = String(seconds).padStart(2, '0');

            const nextYear = nextAnniv.getFullYear() - annivYear;
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('next-anniv-text').innerHTML =
                'Next anniversary: <strong>' + nextAnniv.toLocaleDateString('en-US', options) + '</strong> â€” ' + ordinal(nextYear) + ' year together ðŸŽ‰';
        }

        function ordinal(n) {
            const s = ['th', 'st', 'nd', 'rd'];
            const v = n % 100;
            return n + (s[(v - 20) % 10] || s[v] || s[0]);
        }

        // ============ GLOBE.GL DISTANCE VISUALIZATION ============
        let globeInstance = null;

        function initGlobe() {
            const container = document.getElementById('globe-viz');
            if (!container || globeInstance) return;

            // Indonesia (approx: Java) & Slovenia coordinates
            const indonesia = { lat: -6.9, lng: 107.6, label: 'Indonesia ðŸï¸', color: '#E18E96' };
            const slovenia  = { lat: 46.05, lng: 14.5,  label: 'Slovenia â„ï¸',  color: '#3182BD' };

            // Arc data
            const arcsData = [{
                startLat: indonesia.lat,
                startLng: indonesia.lng,
                endLat: slovenia.lat,
                endLng: slovenia.lng,
                color: ['#E18E96', '#5da4d9']
            }];

            // Points data
            const pointsData = [
                { lat: indonesia.lat, lng: indonesia.lng, size: 0.8, color: '#E18E96', label: 'Indonesia' },
                { lat: slovenia.lat,  lng: slovenia.lng,  size: 0.8, color: '#3182BD', label: 'Slovenia' }
            ];

            // Ring data (pulsing rings at locations)
            const ringsData = [
                { lat: indonesia.lat, lng: indonesia.lng, maxR: 3, propagationSpeed: 2, repeatPeriod: 1200, color: () => 'rgba(225, 142, 150, 0.6)' },
                { lat: slovenia.lat,  lng: slovenia.lng,  maxR: 3, propagationSpeed: 2, repeatPeriod: 1200, color: () => 'rgba(49, 130, 189, 0.6)' }
            ];

            // Labels
            const labelsData = [
                { lat: indonesia.lat, lng: indonesia.lng, text: 'Lolo', color: '#E18E96', size: 1.5 },
                { lat: slovenia.lat,  lng: slovenia.lng,  text: 'Jojo',  color: '#5da4d9', size: 1.5 }
            ];

            const w = container.clientWidth;
            const h = container.clientHeight;

            globeInstance = Globe()
                .globeImageUrl('https://unpkg.com/three-globe/example/img/earth-blue-marble.jpg')
                .bumpImageUrl('https://unpkg.com/three-globe/example/img/earth-topology.png')
                .backgroundImageUrl('')
                .backgroundColor('rgba(0,0,0,0)')
                .width(w)
                .height(h)
                .atmosphereColor('#5da4d9')
                .atmosphereAltitude(0.2)
                // Arcs
                .arcsData(arcsData)
                .arcColor('color')
                .arcStroke(1.5)
                .arcDashLength(0.4)
                .arcDashGap(0.2)
                .arcDashAnimateTime(2500)
                .arcAltitudeAutoScale(0.4)
                // Points
                .pointsData(pointsData)
                .pointColor('color')
                .pointAltitude(0.01)
                .pointRadius('size')
                // Rings
                .ringsData(ringsData)
                .ringColor('color')
                .ringMaxRadius('maxR')
                .ringPropagationSpeed('propagationSpeed')
                .ringRepeatPeriod('repeatPeriod')
                // Labels
                .labelsData(labelsData)
                .labelText('text')
                .labelSize('size')
                .labelColor('color')
                .labelDotRadius(0.4)
                .labelAltitude(0.02)
                .labelResolution(6)
                (container);

            // Set initial point of view (centered between the two)
            globeInstance.pointOfView({ lat: 20, lng: 60, altitude: 2.2 }, 0);

            // Auto-rotate
            globeInstance.controls().autoRotate = true;
            globeInstance.controls().autoRotateSpeed = 0.5;
            globeInstance.controls().enableZoom = true;

            // Handle resize
            const resizeObserver = new ResizeObserver(() => {
                globeInstance.width(container.clientWidth);
                globeInstance.height(container.clientHeight);
            });
            resizeObserver.observe(container);
        }

        // Lazy-init globe when it scrolls into view
        function setupGlobeObserver() {
            const globeSection = document.getElementById('distance');
            if (!globeSection) return;

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        initGlobe();
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });

            observer.observe(globeSection);
        }

        // ============ INIT ============
        function initDashboard() {
            initReveal();
            initHeroCanvas();
            setupGlobeObserver();
            updateCountdown();
            setInterval(updateCountdown, 1000);
        }

        createLockParticles();
        passwordInput.focus();

        // ============ ENVELOPE / LETTER INTERACTION ============
        function openEnvelope() {
            const env = document.getElementById('envelope');
            if (env.classList.contains('flap-open')) return;
            const flap = env.querySelector('.envelope-flap');

            // Step 1: Flap opens (folds backward)
            env.classList.add('flap-open');

            // After flap animation finishes, drop z-index so it goes behind
            setTimeout(() => {
                flap.style.zIndex = '0';
            }, 800);

            // Step 2: After flap fully opens + small pause, letter slides up
            setTimeout(() => {
                env.classList.add('letter-out');
            }, 1100);

            // Step 3: After letter slides out, show full letter overlay
            setTimeout(() => {
                const overlay = document.getElementById('letter-overlay');
                overlay.style.display = 'flex';
                requestAnimationFrame(() => {
                    overlay.classList.add('show');
                });
                createLetterHearts();
            }, 2400);
        }

        function closeLetterOverlay(e) {
            if (e.target === document.getElementById('letter-overlay')) {
                closeLetter();
            }
        }

        function closeLetter() {
            const overlay = document.getElementById('letter-overlay');
            overlay.classList.remove('show');
            setTimeout(() => {
                overlay.style.display = 'none';
                const env = document.getElementById('envelope');
                const flap = env.querySelector('.envelope-flap');

                // Step 1: Letter slides back down into envelope
                env.classList.remove('letter-out');

                // Step 2: After letter is back inside, restore flap z-index and close it
                setTimeout(() => {
                    flap.style.zIndex = '4';
                    env.classList.remove('flap-open');
                }, 1000);
            }, 500);
        }

        function createLetterHearts() {
            const container = document.getElementById('letter-hearts-bg');
            if (!container) return;
            container.innerHTML = '';
            const hearts = ['â¤ï¸', 'ðŸ’•', 'ðŸŒ¸', 'â„ï¸', 'ðŸ¤', 'ðŸ’–'];
            for (let i = 0; i < 15; i++) {
                const h = document.createElement('div');
                h.classList.add('letter-float-heart');
                h.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                h.style.left = Math.random() * 100 + '%';
                h.style.animationDuration = (Math.random() * 15 + 10) + 's';
                h.style.animationDelay = (Math.random() * 8) + 's';
                h.style.fontSize = (Math.random() * 1 + 0.8) + 'rem';
                container.appendChild(h);
            }
        }

        // ============ PHOTO BOOTH LOGIC ============
        let boothStream = null;
        let boothFilter = 'none';
        let boothPhotos = [];
        let boothIndex = 0;

        // Filter buttons
        document.querySelectorAll('.booth-filter-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.booth-filter-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                boothFilter = btn.dataset.boothFilter;
                const video = document.getElementById('boothCameraFeed');
                video.className = '';
                if (boothFilter !== 'none') video.classList.add(boothFilter);
            });
        });

        async function boothStartCamera() {
            try {
                boothStream = await navigator.mediaDevices.getUserMedia({
                    video: { facingMode: 'user', width: { ideal: 1280 }, height: { ideal: 720 } }
                });
                const video = document.getElementById('boothCameraFeed');
                video.srcObject = boothStream;

                // Reset
                boothPhotos = [];
                boothIndex = 0;
                boothUpdateGrid();
                boothUpdateCounter();

                document.getElementById('boothPlaceholder').style.display = 'none';
                document.getElementById('boothStartBtn').style.display = 'none';
                document.getElementById('boothCaptureBtn').style.display = 'flex';
                document.getElementById('boothPhotoCounter').style.display = 'block';
                document.getElementById('boothGridPreview').style.display = 'block';
                document.getElementById('boothRetakeBtn').style.display = 'none';
                document.getElementById('boothDownloadBtn').style.display = 'none';
            } catch (err) {
                alert('Cannot access camera. Please allow camera permission.');
                console.error('Camera error:', err);
            }
        }

        function boothCapture() {
            const useTimer = document.getElementById('boothUseTimer').checked;
            if (useTimer) {
                boothCountdown();
            } else {
                boothTakePhoto();
            }
        }

        function boothCountdown() {
            const cdEl = document.getElementById('boothCountdown');
            const captureBtn = document.getElementById('boothCaptureBtn');
            let count = 3;
            captureBtn.disabled = true;
            cdEl.style.display = 'flex';
            cdEl.querySelector('span').textContent = count;

            const interval = setInterval(() => {
                count--;
                if (count > 0) {
                    cdEl.querySelector('span').textContent = count;
                    cdEl.querySelector('span').style.animation = 'none';
                    cdEl.querySelector('span').offsetHeight;
                    cdEl.querySelector('span').style.animation = 'countdownPop 1s ease-in-out';
                } else {
                    clearInterval(interval);
                    cdEl.style.display = 'none';
                    captureBtn.disabled = false;
                    boothTakePhoto();
                }
            }, 1000);
        }

        function boothTakePhoto() {
            const video = document.getElementById('boothCameraFeed');
            const canvas = document.getElementById('boothCanvas');
            const ctx = canvas.getContext('2d');
            const flash = document.getElementById('boothFlash');

            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;

            // Flash
            flash.classList.add('active');
            setTimeout(() => flash.classList.remove('active'), 300);

            // Draw mirrored
            ctx.save();
            ctx.scale(-1, 1);
            ctx.drawImage(video, -canvas.width, 0, canvas.width, canvas.height);
            ctx.restore();

            // Apply filter
            boothApplyFilter(ctx, canvas.width, canvas.height);

            // Save
            boothPhotos.push(canvas.toDataURL('image/png'));
            boothIndex++;

            boothUpdateGrid();
            boothUpdateCounter();

            if (boothIndex >= 4) {
                document.getElementById('boothCaptureBtn').style.display = 'none';
                document.getElementById('boothRetakeBtn').style.display = 'flex';
                document.getElementById('boothDownloadBtn').style.display = 'flex';
                document.getElementById('boothPhotoCounter').style.display = 'none';
                boothGenerateCanvas();
            } else {
                const useTimer = document.getElementById('boothUseTimer').checked;
                if (useTimer) {
                    setTimeout(() => boothCountdown(), 500);
                }
            }
        }

        function boothApplyFilter(ctx, w, h) {
            if (boothFilter === 'none') return;
            const img = ctx.getImageData(0, 0, w, h);
            const d = img.data;
            for (let i = 0; i < d.length; i += 4) {
                const r = d[i], g = d[i+1], b = d[i+2];
                switch(boothFilter) {
                    case 'warm':
                        d[i] = Math.min(255, r * 1.1);
                        d[i+2] = Math.max(0, b * 0.9);
                        break;
                    case 'pink':
                        d[i] = Math.min(255, r * 1.1);
                        d[i+1] = g * 0.95;
                        d[i+2] = Math.min(255, b * 1.05);
                        break;
                    case 'vintage':
                        d[i] = r * 0.9 + 40;
                        d[i+1] = g * 0.8 + 20;
                        d[i+2] = b * 0.7;
                        break;
                    case 'bw':
                        const gray = r * 0.299 + g * 0.587 + b * 0.114;
                        d[i] = d[i+1] = d[i+2] = gray;
                        break;
                    case 'cold':
                        d[i] = Math.max(0, r * 0.9);
                        d[i+2] = Math.min(255, b * 1.15);
                        break;
                }
            }
            ctx.putImageData(img, 0, 0);
        }

        function boothUpdateCounter() {
            const num = document.getElementById('boothPhotoNum');
            const count = document.getElementById('boothCaptureCount');
            if (num) num.textContent = Math.min(boothIndex + 1, 4);
            if (count) count.textContent = `(${Math.min(boothIndex + 1, 4)}/4)`;
        }

        function boothUpdateGrid() {
            for (let i = 0; i < 4; i++) {
                const el = document.getElementById(`boothGrid${i + 1}`);
                if (boothPhotos[i]) {
                    el.innerHTML = `<img src="${boothPhotos[i]}" alt="Photo ${i+1}">`;
                    el.classList.add('filled');
                } else {
                    el.innerHTML = `<span>${i + 1}</span>`;
                    el.classList.remove('filled');
                }
            }
        }

        function boothRoundedRect(ctx, x, y, w, h, r) {
            ctx.beginPath();
            ctx.moveTo(x + r, y);
            ctx.lineTo(x + w - r, y);
            ctx.quadraticCurveTo(x + w, y, x + w, y + r);
            ctx.lineTo(x + w, y + h - r);
            ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
            ctx.lineTo(x + r, y + h);
            ctx.quadraticCurveTo(x, y + h, x, y + h - r);
            ctx.lineTo(x, y + r);
            ctx.quadraticCurveTo(x, y, x + r, y);
            ctx.closePath();
        }

        function boothGenerateCanvas() {
            const gc = document.getElementById('boothGridCanvas');
            const ctx = gc.getContext('2d');

            const ps = 400, gap = 10, pad = 20, hdr = 55, ftr = 55;
            gc.width = ps * 2 + gap + pad * 2;
            gc.height = hdr + ps * 2 + gap + ftr + pad * 2;

            // Background
            ctx.fillStyle = '#fff';
            ctx.fillRect(0, 0, gc.width, gc.height);

            // Header
            ctx.fillStyle = '#c46a73';
            ctx.font = 'bold 28px Dancing Script, cursive, sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('ðŸ’• Between Island and Snow ðŸ’•', gc.width / 2, 38);

            const positions = [
                { x: pad, y: hdr + pad },
                { x: pad + ps + gap, y: hdr + pad },
                { x: pad, y: hdr + pad + ps + gap },
                { x: pad + ps + gap, y: hdr + pad + ps + gap }
            ];

            const loadAll = boothPhotos.map((src, idx) => new Promise(resolve => {
                const img = new Image();
                img.onload = () => {
                    const pos = positions[idx];
                    const ia = img.width / img.height;
                    let sx = 0, sy = 0, sw = img.width, sh = img.height;
                    if (ia > 1) { sw = img.height; sx = (img.width - sw) / 2; }
                    else { sh = img.width; sy = (img.height - sh) / 2; }

                    ctx.save();
                    boothRoundedRect(ctx, pos.x, pos.y, ps, ps, 10);
                    ctx.clip();
                    ctx.drawImage(img, sx, sy, sw, sh, pos.x, pos.y, ps, ps);
                    ctx.restore();

                    ctx.strokeStyle = '#E18E96';
                    ctx.lineWidth = 3;
                    boothRoundedRect(ctx, pos.x, pos.y, ps, ps, 10);
                    ctx.stroke();
                    resolve();
                };
                img.src = src;
            }));

            Promise.all(loadAll).then(() => {
                ctx.fillStyle = '#c46a73';
                ctx.font = 'bold 20px Dancing Script, cursive, sans-serif';
                ctx.textAlign = 'center';
                ctx.fillText('ðŸ’• Lolo & Jojo â€” September 9, 2025 ðŸ’•', gc.width / 2, gc.height - 20);
            });
        }

        function boothDownload() {
            const gc = document.getElementById('boothGridCanvas');
            const a = document.createElement('a');
            a.download = 'island-and-snow-photobooth.png';
            a.href = gc.toDataURL('image/png');
            a.click();
        }

        function boothReset() {
            boothPhotos = [];
            boothIndex = 0;
            boothUpdateGrid();
            boothUpdateCounter();

            document.getElementById('boothCaptureBtn').style.display = 'flex';
            document.getElementById('boothRetakeBtn').style.display = 'none';
            document.getElementById('boothDownloadBtn').style.display = 'none';
            document.getElementById('boothPhotoCounter').style.display = 'block';
        }
    </script>
</body>
</html>
